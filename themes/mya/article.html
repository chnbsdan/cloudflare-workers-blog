<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width,viewport-fit=cover">
		<title>{{ &articleSingle.title }} - {{ &OPT.siteName }}</title>
		<meta name="keywords" content="{{ &keyWords }}" />
		<meta name="description" content="{{ &OPT.siteDescription }}" />

		<link rel='stylesheet' id='stylesheet-css' href='https://cdn.jsdelivr.net/gh/gdtool/cloudflare-workers-blog@master/themes/JustNews/files/main.css' type='text/css' media='all' />
		<link rel='stylesheet' id='font-awesome-css' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css' type='text/css' media='all' />
		<link rel='stylesheet' id='wp-block-library-css' href='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.5.3/wp-includes/css/dist/block-library/style.min.css?ver=5.6' type='text/css' media='all' />
		<link rel='stylesheet' id='wp-components-css' href='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.5.3/wp-includes/css/dist/components/style.min.css?ver=5.6' type='text/css' media='all' />
		<link rel='stylesheet' id='wp-editor-font-css' href='https://fonts.geekzu.org/css?family=Noto+Serif%3A400%2C400i%2C700%2C700i&#038;ver=5.6' type='text/css' media='all' />
		<link rel='stylesheet' id='wp-block-editor-css' href='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.5.3/wp-includes/css/dist/block-editor/style.min.css?ver=5.6' type='text/css' media='all' />
		<link rel='stylesheet' id='wp-nux-css' href='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.5.3/wp-includes/css/dist/nux/style.min.css?ver=5.6' type='text/css' media='all' />
		<link rel='stylesheet' id='wp-editor-css' href='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.5.3/wp-includes/css/dist/editor/style.min.css?ver=5.6' type='text/css' media='all' />
		<link rel='stylesheet' id='mux_video_block_style-css' href='https://cdn.jsdelivr.net/gh/newexsexy/wp@master/wp-content/plugins/ilab-media-tools/public/blocks/mediacloud-mux.blocks.style.min.css' type='text/css' media='all' />
		
		<link rel='stylesheet' id='emojify-css' href='https://cdn.jsdelivr.net/npm/emojify.js@1.1.0/dist/css/basic/emojify.min.css?ver=1.1.0' type='text/css' media='all' />
		<script type='text/javascript' src='https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js?ver=3.5.1' id='jquery-core-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.6/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.3.2' id='jquery-migrate-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/wpcom-cn/assets/fonts/icons-2.6.4.js?ver=6.1.2' id='wpcom-icons-js'></script>
		<link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.3.2/styles/tomorrow-night-bright.min.css">
		<script src='https://cdn.staticfile.org/highlight.js/10.3.2/highlight.min.js'></script>

         <style>
        /* 修复多层背景问题 - 移除多余白层 */
.main > article {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* 确保只有文章内容区域有背景 */
.entry {
    background: rgba(255, 255, 255, 0.92) !important;
    border-radius: 16px !important;
    padding: 30px !important;
    margin-bottom: 30px !important;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08) !important;
    border: 1px solid rgba(226, 232, 240, 0.8) !important;
    backdrop-filter: blur(10px) !important;
}

/* 移除内容区域的任何嵌套背景 */
.entry-content {
    background: transparent !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    box-shadow: none !important;
}

/* 确保头部和底部也是透明的 */
.entry-head,
.entry-footer {
    background: transparent !important;
}

/* 修复评论区多层背景 */
.comments-area,
#comments {
    background: transparent !important;
    border-radius: 0 !important;
    padding: 40px 0 0 0 !important;
    margin: 40px 0 0 0 !important;
    box-shadow: none !important;
    border: none !important;
    border-top: 2px solid rgba(59, 130, 246, 0.1) !important;
}

/* 移除所有嵌套背景 */
.comments-area > *,
#comments > * {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}

	/* 彻底修复图片蓝色线条问题+ */
.entry-content img,
.post-content img,
.article-content img,
.entry-content img:hover,
.post-content img:hover,
.article-content img:hover {
    /* 移除所有可能的边框和轮廓 */
    outline: none !important;
    border: none !important;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08) !important;
    
    /* 防止任何浏览器默认样式 */
    text-decoration: none !important;
    -webkit-tap-highlight-color: transparent !important;
    -webkit-focus-ring-color: transparent !important;
    
    /* 确保盒模型正确 */
    box-sizing: border-box !important;
    display: block !important;
}

.entry-content img:hover,
.post-content img:hover,
.article-content img:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
}

/* 修复可能由父元素继承的边框 */
.entry-content,
.post-content,
.article-content {
    border: none !important;
    outline: none !important;
}

.entry-content a,
.post-content a,
.article-content a {
    border: none !important;
    outline: none !important;
    text-decoration: none !important;
}
			 
			/* 保持容器布局，只移除多余背景层+ */
.entry,
.post,
.article {
    background: rgba(255, 255, 255, 0.92) !important;
    border-radius: 16px !important;
    padding: 30px !important;
    margin-bottom: 30px !important;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08) !important;
    border: 1px solid rgba(226, 232, 240, 0.8) !important;
    backdrop-filter: blur(10px) !important;
}

/* 移除内容区域的多余背景，但保持布局 */
.entry-content,
.post-content,
.article-content {
    background: transparent !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    box-shadow: none !important;
}

/* 保持标题区域样式，只移除背景 */
.entry-head {
    background: transparent !important;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 2px solid rgba(59, 130, 246, 0.1);
}

/* 保持底部区域样式，只移除背景 */
.entry-footer {
    background: transparent !important;
    margin-top: 40px;
    padding-top: 25px;
    border-top: 2px solid rgba(59, 130, 246, 0.1);
}

/* 保持元信息区域样式，只移除背景 */
.entry-meta,
.post-meta,
.article-meta {
    background: transparent !important;
    border: none !important;
    padding: 15px 0 !important;
    margin-bottom: 25px !important;
}

/* 确保1400px容器正常工作 */
div#wrap > div.container.wrap {
    max-width: 1400px !important;
    width: 1400px !important;
    background: transparent !important;
}

div#wrap > div.container.wrap > div.main {
    width: 75% !important;
    float: left !important;
    background: transparent !important;
}

div#wrap > div.container.wrap > aside.sidebar {
    width: 24% !important;
    float: right !important;
    margin-left: 1% !important;
    background: transparent !important;
}

/* 保持body背景图片，但确保内容在容器内 */
body {
    background-image: url('https://img.hangdn.com/fg/fj31.jpg') !important;
    background-size: cover !important;
    background-attachment: fixed !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
}

/* 确保主要内容区域有合适的背景对比度 */
.main > article {
    background: rgba(255, 255, 255, 0.92) !important;
}

       /* 首页文章标题美化 */
.entry-title a,
.post-title a,
.article-title a {
    color: #1e293b;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.4em;
    line-height: 1.3;
    transition: all 0.3s ease;
    display: block;
    padding: 8px 0;
}

.entry-title a:hover,
.post-title a:hover,
.article-title a:hover {
    color: #3b82f6;
    transform: translateX(5px);
}

/* 首页文章预览图片美化 - 只针对首页列表 */
.home .entry-thumbnail,
.home .post-thumbnail,
.home .article-thumbnail,
.blog .entry-thumbnail,
.blog .post-thumbnail,
.blog .article-thumbnail,
.archive .entry-thumbnail,
.archive .post-thumbnail,
.archive .article-thumbnail {
    width: 100%;
    height: 220px;
    object-fit: cover;
    border-radius: 16px;
    margin-bottom: 20px;
    transition: all 0.3s ease;
    filter: brightness(0.95);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.home .entry-thumbnail:hover,
.home .post-thumbnail:hover,
.home .article-thumbnail:hover,
.blog .entry-thumbnail:hover,
.blog .post-thumbnail:hover,
.blog .article-thumbnail:hover,
.archive .entry-thumbnail:hover,
.archive .post-thumbnail:hover,
.archive .article-thumbnail:hover {
    transform: scale(1.02) translateY(-5px);
    filter: brightness(1.05) contrast(1.1);
    box-shadow: 0 15px 40px rgba(59, 130, 246, 0.25);
    border-color: rgba(59, 130, 246, 0.4);
}

/* 文章内容区图片 - 移除高度限制，保持自然尺寸 */
.entry-content img,
.post-content img,
.article-content img {
    max-width: 100%;
    height: auto;
    border-radius: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    margin: 20px 0;
}

.entry-content img:hover,
.post-content img:hover,
.article-content img:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

/* 简化文章内容区背景 - 单层简洁背景 */
.entry,
.post,
.article {
    background: rgba(255, 255, 255, 0.92);
    border-radius: 16px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(226, 232, 240, 0.8);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.entry:hover,
.post:hover,
.article:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 50px rgba(0, 0, 0, 0.12);
}

/* 移除重复的背景设置，只保留内容区域的内边距 */
.entry-content,
.post-content,
.article-content {
    padding: 0;
    background: transparent;
    border: none;
    box-shadow: none;
    margin-bottom: 0;
}

/* 文章标题区域优化 */
.entry-head {
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 2px solid rgba(59, 130, 246, 0.1);
}

.entry-title {
    font-size: 2em;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 15px;
    line-height: 1.3;
}

.entry-info {
    color: #64748b;
    font-size: 0.95em;
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.entry-info a {
    color: #3b82f6;
    text-decoration: none;
    transition: color 0.3s ease;
}

.entry-info a:hover {
    color: #2563eb;
}

/* 文章底部区域 - 移除自定义样式，恢复原样 */
.entry-footer {
    margin-top: 40px;
    padding-top: 25px;
    border-top: 2px solid rgba(59, 130, 246, 0.1);
}

/* 文章摘要预览美化 */
.entry-summary,
.post-summary,
.article-summary,
.entry-content p:first-of-type,
.post-content p:first-of-type,
.article-content p:first-of-type {
    color: #64748b;
    line-height: 1.7;
    font-size: 1.05em;
    margin-bottom: 20px;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* 文章元信息美化 */
.entry-meta,
.post-meta,
.article-meta {
    display: flex;
    align-items: center;
    gap: 20px;
    margin: 15px 0;
    padding: 12px 0;
    border-top: 1px solid rgba(226, 232, 240, 0.8);
    border-bottom: 1px solid rgba(226, 232, 240, 0.8);
    font-size: 0.9em;
    color: #94a3b8;
}

.entry-meta span,
.post-meta span,
.article-meta span {
    display: flex;
    align-items: center;
    gap: 6px;
}

.entry-meta i,
.post-meta i,
.article-meta i {
    color: #3b82f6;
    font-size: 1.1em;
}

/* 阅读更多按钮美化 */
.read-more,
.more-link,
.continue-reading {
    display: inline-block;
    padding: 10px 24px;
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    text-decoration: none;
    border-radius: 25px;
    font-weight: 600;
    font-size: 0.95em;
    transition: all 0.3s ease;
    border: none;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.read-more:hover,
.more-link:hover,
.continue-reading:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
    background: linear-gradient(135deg, #2563eb, #4f46e5);
}

/* 右侧标签云 - 一排三个标签 */
.widget_tag_cloud .tagcloud {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 0 -4px;
}

.widget_tag_cloud a {
    display: inline-block;
    flex: 1;
    min-width: calc(33.333% - 16px);
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    color: #475569;
    text-decoration: none;
    border-radius: 12px;
    padding: 10px 12px;
    font-size: 0.85em;
    font-weight: 500;
    text-align: center;
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease;
    margin: 4px;
    box-sizing: border-box;
}

.widget_tag_cloud a:hover {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
    border-color: #3b82f6;
}

/* 标签计数样式 */
.widget_tag_cloud .count {
    font-size: 0.75em;
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    padding: 2px 6px;
    border-radius: 8px;
    margin-left: 4px;
    transition: all 0.3s ease;
}

.widget_tag_cloud a:hover .count {
    background: rgba(255, 255, 255, 0.3);
    color: white;
}

/* 响应式调整 */
@media (max-width: 1024px) {
    .widget_tag_cloud a {
        min-width: calc(50% - 16px);
    }
}

@media (max-width: 768px) {
    .widget_tag_cloud a {
        min-width: calc(100% - 16px);
    }
    
    .home .entry-thumbnail,
    .home .post-thumbnail,
    .home .article-thumbnail,
    .blog .entry-thumbnail,
    .blog .post-thumbnail,
    .blog .article-thumbnail,
    .archive .entry-thumbnail,
    .archive .post-thumbnail,
    .archive .article-thumbnail {
        height: 180px;
    }
    
    .entry-title a,
    .post-title a,
    .article-title a {
        font-size: 1.3em;
    }
    
    .entry,
    .post,
    .article {
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
    }
    
    .entry-title {
        font-size: 1.6em;
    }
    
    .entry-info {
        gap: 10px;
        font-size: 0.9em;
    }
}

@media (max-width: 480px) {
    .entry-meta,
    .post-meta,
    .article-meta {
        flex-direction: column;
        gap: 8px;
        align-items: flex-start;
    }
    
    .widget_tag_cloud a {
        min-width: 100%;
        margin: 2px 0;
    }
    
    .entry,
    .post,
    .article {
        padding: 15px;
        border-radius: 10px;
    }
    
    .entry-title {
        font-size: 1.4em;
    }
    
    .entry-info {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
}

/* 分类目录小部件样式 - 一排三个 */
.widget_categories ul {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 0 -4px;
    list-style: none;
    padding: 0;
}

.widget_categories li {
    flex: 1 0 calc(33.333% - 16px);
    margin: 0;
    padding: 0;
    min-width: calc(33.333% - 16px);
    box-sizing: border-box;
}

.widget_categories a {
    display: block;
    padding: 12px 8px;
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    color: #475569;
    text-decoration: none;
    border-radius: 12px;
    font-size: 0.85em;
    font-weight: 500;
    text-align: center;
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease;
    margin: 4px;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
}

.widget_categories a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(59, 130, 246, 0.1), 
        transparent);
    transition: left 0.6s ease;
}

.widget_categories a:hover {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
    border-color: #3b82f6;
}

.widget_categories a:hover::before {
    left: 100%;
}

.widget_categories .count {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    padding: 2px 6px;
    border-radius: 8px;
    font-size: 0.75em;
    margin-left: 4px;
    transition: all 0.3s ease;
}

.widget_categories a:hover .count {
    background: rgba(255, 255, 255, 0.3);
    color: white;
}

/* 响应式调整 */
@media (max-width: 1024px) {
    .widget_categories li {
        flex: 1 0 calc(50% - 16px);
        min-width: calc(50% - 16px);
    }
}

@media (max-width: 768px) {
    .widget_categories li {
        flex: 1 0 calc(100% - 16px);
        min-width: calc(100% - 16px);
    }
}

@media (max-width: 480px) {
    .widget_categories ul {
        gap: 6px;
        margin: 0 -3px;
    }
    
    .widget_categories li {
        flex: 1 0 calc(50% - 12px);
        min-width: calc(50% - 12px);
    }
    
    .widget_categories a {
        padding: 10px 6px;
        font-size: 0.8em;
        margin: 3px;
    }
}
			 
/* 代码块复制按钮样式 */
.code-copy-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(59, 130, 246, 0.9);
    border: none;
    border-radius: 6px;
    color: white;
    padding: 6px 12px;
    font-size: 12px;
    cursor: pointer;
    opacity: 0;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    z-index: 10;
}

pre:hover .code-copy-btn {
    opacity: 1;
}

.code-copy-btn:hover {
    background: rgba(37, 99, 235, 0.9);
    transform: translateY(-1px);
}

.code-copy-btn.copied {
    background: rgba(16, 185, 129, 0.9);
}

/* 确保代码块有相对定位 */
.entry-content pre,
.post-content pre,
.article-content pre {
    position: relative !important;
}

/* 文章标题样式 */
.entry-title,
.post-title,
.article-title {
    font-size: 1.8em;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(59, 130, 246, 0.1);
    position: relative;
}

.entry-title::before,
.post-title::before,
.article-title::before {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 60px;
    height: 3px;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    border-radius: 2px;
}

/* 文章元信息样式 */
.entry-meta,
.post-meta,
.article-meta {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 25px;
    padding: 15px;
    background: rgba(241, 245, 249, 0.6);
    border-radius: 12px;
    font-size: 0.9em;
    color: #64748b;
}

.entry-meta span,
.post-meta span,
.article-meta span {
    display: flex;
    align-items: center;
    gap: 6px;
}

.entry-meta i,
.post-meta i,
.article-meta i {
    color: #3b82f6;
}

/* 文章内容样式 */
.entry-content p,
.post-content p,
.article-content p {
    line-height: 1.8;
    margin-bottom: 20px;
    color: #374151;
    font-size: 1.05em;
}

.entry-content h2,
.post-content h2,
.article-content h2 {
    font-size: 1.5em;
    font-weight: 600;
    color: #1e293b;
    margin: 30px 0 15px 0;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(59, 130, 246, 0.1);
}

.entry-content h3,
.post-content h3,
.article-content h3 {
    font-size: 1.3em;
    font-weight: 600;
    color: #1e293b;
    margin: 25px 0 12px 0;
}

/* 代码块样式 */
.entry-content pre,
.post-content pre,
.article-content pre {
    background: linear-gradient(135deg, #1e293b, #334155);
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    overflow-x: auto;
    color: #e2e8f0;
    font-family: 'Monaco', 'Consolas', monospace;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.entry-content code,
.post-content code,
.article-content code {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    padding: 2px 6px;
    border-radius: 6px;
    font-size: 0.9em;
    font-family: 'Monaco', 'Consolas', monospace;
}

/* 引用样式 */
.entry-content blockquote,
.post-content blockquote,
.article-content blockquote {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(139, 92, 246, 0.05));
    border-left: 4px solid #3b82f6;
    border-radius: 0 12px 12px 0;
    padding: 20px;
    margin: 20px 0;
    font-style: italic;
    color: #475569;
    position: relative;
}

.entry-content blockquote::before,
.post-content blockquote::before,
.article-content blockquote::before {
    content: '"';
    font-size: 3em;
    color: rgba(59, 130, 246, 0.2);
    position: absolute;
    top: 10px;
    left: 10px;
    line-height: 1;
}

/* 列表样式 */
.entry-content ul,
.post-content ul,
.article-content ul,
.entry-content ol,
.post-content ol,
.article-content ol {
    margin: 20px 0;
    padding-left: 20px;
}

.entry-content li,
.post-content li,
.article-content li {
    margin-bottom: 8px;
    line-height: 1.6;
    color: #374151;
}

.entry-content ul li::marker,
.post-content ul li::marker,
.article-content ul li::marker {
    color: #3b82f6;
}

/* 表格样式 */
.entry-content table,
.post-content table,
.article-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
}

.entry-content th,
.post-content th,
.article-content th {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    padding: 12px 15px;
    text-align: left;
    font-weight: 600;
}

.entry-content td,
.post-content td,
.article-content td {
    padding: 12px 15px;
    border-bottom: 1px solid rgba(226, 232, 240, 0.8);
    color: #374151;
}

.entry-content tr:hover td,
.post-content tr:hover td,
.article-content tr:hover td {
    background: rgba(59, 130, 246, 0.05);
}

/* 图片样式 */
.entry-content img,
.post-content img,
.article-content img {
    max-width: 100%;
    height: auto;
    border-radius: 12px;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    filter: brightness(0.98);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.entry-content img:hover,
.post-content img:hover,
.article-content img:hover {
    transform: scale(1.02);
    filter: brightness(1.05);
    box-shadow: 0 8px 30px rgba(59, 130, 246, 0.2);
}

/* 强制所有文章图片居中 - 最强优先级 */
.entry-content img:not(.wp-smiley):not(.emoji),
.post-content img:not(.wp-smiley):not(.emoji),
.article-content img:not(.wp-smiley):not(.emoji) {
    display: block !important;
    margin: 20px auto !important;
    max-width: 100% !important;
    height: auto !important;
    float: none !important;
    text-align: center !important;
}

/* 确保所有图片容器居中 */
.entry-content * img,
.post-content * img,
.article-content * img {
    display: block !important;
    margin-left: auto !important;
    margin-right: auto !important;
}

/* 覆盖任何可能的内联样式 */
img[src*=".jpg"],
img[src*=".jpeg"], 
img[src*=".png"],
img[src*=".gif"],
img[src*=".webp"] {
    display: block !important;
    margin: 20px auto !important;
}
			 
/* 链接样式 */
.entry-content a,
.post-content a,
.article-content a {
    color: #3b82f6;
    text-decoration: none;
    font-weight: 500;
    position: relative;
    transition: all 0.3s ease;
}

.entry-content a::after,
.post-content a::after,
.article-content a::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    transition: width 0.3s ease;
}

.entry-content a:hover,
.post-content a:hover,
.article-content a:hover {
    color: #2563eb;
}

.entry-content a:hover::after,
.post-content a:hover::after,
.article-content a:hover::after {
    width: 100%;
}

/* 分页样式 */
.pagination,
.nav-links {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin: 40px 0 20px 0;
}

.page-numbers,
.pagination a {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px 16px;
    background: rgba(241, 245, 249, 0.6);
    border-radius: 12px;
    color: #475569;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    min-width: 44px;
}

.page-numbers:hover,
.pagination a:hover {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.page-numbers.current {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    font-weight: 600;
}

/* 简化评论区为单层背景 */
.comments-area,
#comments {
    background: rgba(255, 255, 255, 0.92);
    border-radius: 16px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(226, 232, 240, 0.8);
    backdrop-filter: blur(10px);
}

.comments-title {
    font-size: 1.5em;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 25px;
    padding-bottom: 12px;
    border-bottom: 2px solid rgba(59, 130, 246, 0.1);
}

/* 响应式调整 */
@media (max-width: 768px) {
    .comments-area,
    #comments {
        padding: 20px;
        border-radius: 12px;
    }
    
    .comments-title {
        font-size: 1.3em;
    }
}

/* 右侧小部件通用样式优化 */
.widget {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 30px;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
    overflow: hidden;
}

.widget::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(59, 130, 246, 0.05), 
        transparent);
    transition: left 0.6s ease;
}

.widget:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 
        0 20px 40px rgba(59, 130, 246, 0.15),
        0 8px 32px rgba(0, 0, 0, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
    border-color: rgba(59, 130, 246, 0.2);
}

.widget:hover::before {
    left: 100%;
}

/* 小部件标题样式 */
.widget-title {
    font-size: 1.3em;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 2px solid rgba(59, 130, 246, 0.1);
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
}

.widget-title::before {
    content: '';
    width: 4px;
    height: 20px;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    border-radius: 2px;
    display: inline-block;
}

.widget-title span {
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* 分类小部件样式 */
.widget_categories ul,
.widget_archive ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.widget_categories li,
.widget_archive li {
    margin-bottom: 12px;
    position: relative;
    padding-left: 0;
    transition: all 0.3s ease;
}

.widget_categories a,
.widget_archive a {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: rgba(241, 245, 249, 0.6);
    border-radius: 12px;
    color: #475569;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    position: relative;
    overflow: hidden;
}

.widget_categories a::before,
.widget_archive a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(59, 130, 246, 0.1), 
        transparent);
    transition: left 0.6s ease;
}

.widget_categories a:hover,
.widget_archive a:hover {
    background: linear-gradient(135deg, #fce7f3, #fbcfe8);
    color: white;
    transform: translateX(8px);
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

.widget_categories a:hover::before,
.widget_archive a:hover::before {
    left: 100%;
}

.widget_categories .count,
.widget_archive .count {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    padding: 4px 8px;
    border-radius: 8px;
    font-size: 0.8em;
    font-weight: 600;
    transition: all 0.3s ease;
}

.widget_categories a:hover .count,
.widget_archive a:hover .count {
    background: rgba(255, 255, 255, 0.3);
    color: white;
}

/* 标签云小部件样式 */
.widget_tag_cloud .tagcloud {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.widget_tag_cloud a {
    display: inline-block;
    padding: 8px 16px;
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    color: #475569;
    text-decoration: none;
    border-radius: 25px;
    font-size: 0.9em;
    font-weight: 500;
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.widget_tag_cloud a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(59, 130, 246, 0.1), 
        transparent);
    transition: left 0.6s ease;
}

.widget_tag_cloud a:hover {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3);
    border-color: #3b82f6;
}

.widget_tag_cloud a:hover::before {
    left: 100%;
}

/* 链接小部件样式 - 去掉图标 */
.widget_links ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.widget_links li {
    margin-bottom: 8px;
    position: relative;
}

.widget_links a {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    background: rgba(241, 245, 249, 0.6);
    border-radius: 12px;
    color: #475569;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    position: relative;
    overflow: hidden;
}

.widget_links a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(59, 130, 246, 0.1), 
        transparent);
    transition: left 0.6s ease;
}

.widget_links a:hover {
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    transform: translateX(8px);
    box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}

.widget_links a:hover::before {
    left: 100%;
}

/* 最近文章小部件样式 */
.widget_recent_entries ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

.widget_recent_entries li {
    margin-bottom: 16px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(226, 232, 240, 0.6);
    transition: all 0.3s ease;
}

.widget_recent_entries li:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.widget_recent_entries a {
    display: block;
    color: #374151;
    text-decoration: none;
    font-weight: 500;
    line-height: 1.5;
    transition: all 0.3s ease;
    padding: 8px 0;
    position: relative;
}

.widget_recent_entries a::before {
    content: '▶';
    position: absolute;
    left: -20px;
    color: #3b82f6;
    opacity: 0;
    transform: translateX(-5px);
    transition: all 0.3s ease;
}

.widget_recent_entries a:hover {
    color: #3b82f6;
    transform: translateX(12px);
}

.widget_recent_entries a:hover::before {
    opacity: 1;
    transform: translateX(0);
}

.post-date {
    display: block;
    font-size: 0.85em;
    color: #6b7280;
    margin-top: 4px;
    transition: all 0.3s ease;
}

.widget_recent_entries a:hover .post-date {
    color: #3b82f6;
}

/* 搜索小部件样式 */
.widget_search .search-form {
    position: relative;
}

.widget_search .search-field {
    width: 100%;
    padding: 14px 50px 14px 20px;
    border: 2px solid #e2e8f0;
    border-radius: 15px;
    background: rgba(255, 255, 255, 0.8);
    font-size: 1em;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.widget_search .search-field:focus {
    outline: none;
    border-color: #3b82f6;
    background: rgba(255, 255, 255, 0.95);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    transform: translateY(-2px);
}

.widget_search .search-submit {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    border: none;
    border-radius: 10px;
    color: white;
    padding: 8px 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.widget_search .search-submit:hover {
    background: linear-gradient(135deg, #2563eb, #4f46e5);
    transform: translateY(-50%) scale(1.05);
}

/* 文本小部件样式 */
.widget_text {
    line-height: 1.7;
}

.widget_text p {
    margin-bottom: 12px;
    color: #4b5563;
}

.widget_text a {
    color: #3b82f6;
    text-decoration: none;
    font-weight: 500;
    position: relative;
    transition: all 0.3s ease;
}

.widget_text a::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    transition: width 0.3s ease;
}

.widget_text a:hover {
    color: #2563eb;
}

.widget_text a:hover::after {
    width: 100%;
}

/* 小部件图标动画 */
.widget-title i {
    font-size: 1.2em;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: all 0.3s ease;
}

.widget:hover .widget-title i {
    transform: scale(1.1) rotate(5deg);
}

/* 小部件加载动画 */
@keyframes widgetFadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.widget {
    animation: widgetFadeIn 0.6s ease-out;
}

.widget:nth-child(1) { animation-delay: 0.1s; }
.widget:nth-child(2) { animation-delay: 0.2s; }
.widget:nth-child(3) { animation-delay: 0.3s; }
.widget:nth-child(4) { animation-delay: 0.4s; }
.widget:nth-child(5) { animation-delay: 0.5s; }

/* 滚动条样式优化 */
.widget::-webkit-scrollbar {
    width: 6px;
}

.widget::-webkit-scrollbar-track {
    background: rgba(241, 245, 249, 0.5);
    border-radius: 3px;
}

.widget::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    border-radius: 3px;
    transition: all 0.3s ease;
}

.widget::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #2563eb, #4f46e5);
}

/* 右侧最新评论定义 */
#waline-recent {
    position: relative;
}

#waline-recent img {
    max-width: 100%;
    height: auto;
    border-radius: 12px;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    filter: brightness(0.95);
    transform: translateZ(0);
}

#waline-recent img:hover {
    transform: scale(1.02) translateY(-2px);
    filter: brightness(1.05) contrast(1.1);
    box-shadow: 0 8px 25px rgba(50, 161, 206, 0.3);
}

#waline-recent li {
    border: 2px solid transparent;
    background: linear-gradient(135deg, #ffffff, #f8fafc) padding-box,
               linear-gradient(135deg, #32a1ce, #6366f1, #8b5cf6) border-box;
    border-radius: 16px;
    padding: 16px;
    margin: 12px 0;
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

#waline-recent li::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(50, 161, 206, 0.1), transparent);
    transition: left 0.6s ease;
}

#waline-recent li:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(50, 161, 206, 0.15);
}

#waline-recent li:hover::before {
    left: 100%;
}

#waline-recent li:nth-child(odd) {
    background: linear-gradient(135deg, #ffffff, #f0f9ff) padding-box,
               linear-gradient(135deg, #32a1ce, #06b6d4) border-box;
}

#waline-recent li:nth-child(even) {
    background: linear-gradient(135deg, #ffffff, #fef7ff) padding-box,
               linear-gradient(135deg, #32a1ce, #a855f7) border-box;
}

/* 添加闪烁动画 */
@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

#waline-recent li:active {
    animation: shimmer 0.5s ease;
}

/* 现代感滚动条 */
#waline-recent::-webkit-scrollbar {
    width: 6px;
}

#waline-recent::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 10px;
}

#waline-recent::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #32a1ce, #6366f1);
    border-radius: 10px;
    transition: all 0.3s ease;
}

#waline-recent::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #2563eb, #7c3aed);
}

/* 修复评论区多层背景问题 - 简化版 */
.comments-area,
#comments,
#waline {
    background: rgba(255, 255, 255, 0.92) !important;
    border-radius: 16px !important;
    padding: 30px !important;
    margin-bottom: 30px !important;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.08) !important;
    border: 1px solid rgba(226, 232, 240, 0.8) !important;
    backdrop-filter: blur(10px) !important;
}

/* 移除所有嵌套背景 */
.comments-area > *,
#comments > *,
#waline > * {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* 确保Waline评论组件没有额外背景 */
.waline,
#waline-main,
.waline-container {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

/* 评论标题样式 */
.comments-title {
    font-size: 1.5em;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 25px;
    padding-bottom: 12px;
    border-bottom: 2px solid rgba(59, 130, 246, 0.1);
    background: transparent !important;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .comments-area,
    #comments,
    #waline {
        padding: 20px !important;
        border-radius: 12px !important;
    }
    
    .comments-title {
        font-size: 1.3em;
    }
}	
   /* 彻底修复评论区 - 直接嵌入文章内容区 */
.comments-area,
#comments,
#waline {
    background: transparent !important;
    border-radius: 0 !important;
    padding: 40px 0 0 0 !important;
    margin: 40px 0 0 0 !important;
    box-shadow: none !important;
    border: none !important;
    border-top: 2px solid rgba(59, 130, 246, 0.1) !important;
    backdrop-filter: none !important;
}

/* 移除所有嵌套背景和边框 */
.comments-area > *,
#comments > *,
#waline > *,
.waline,
.waline-container,
.waline-main,
.comment-respond,
.comment-list {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
    margin: 0 !important;
    border-radius: 0 !important;
}

/* 评论标题样式 - 简化 */
.comments-title {
    font-size: 1.5em;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 25px;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(59, 130, 246, 0.1);
    background: transparent !important;
}

/* Waline 评论组件特殊处理 */
#waline .wl-panel {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

#waline .wl-card {
    background: transparent !important;
}

/* 评论列表项样式 */
.wl-comment {
    background: rgba(248, 250, 252, 0.6) !important;
    border-radius: 12px !important;
    padding: 20px !important;
    margin-bottom: 20px !important;
    border: 1px solid rgba(226, 232, 240, 0.6) !important;
}

.wl-comment:hover {
    background: rgba(241, 245, 249, 0.8) !important;
    border-color: rgba(59, 130, 246, 0.2) !important;
}

/* 评论表单样式 */
.wl-editor {
    background: rgba(248, 250, 252, 0.6) !important;
    border: 1px solid rgba(226, 232, 240, 0.6) !important;
    border-radius: 12px !important;
}

.wl-editor:focus {
    border-color: rgba(59, 130, 246, 0.4) !important;
    background: rgba(255, 255, 255, 0.8) !important;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .comments-area,
    #comments,
    #waline {
        padding: 30px 0 0 0 !important;
        margin: 30px 0 0 0 !important;
    }
    
    .comments-title {
        font-size: 1.3em;
    }
    
    .wl-comment {
        padding: 15px !important;
        margin-bottom: 15px !important;
    }
}			 
			 
   </style>


		
		<!-- 文章目录样式 -->
		<style>
		/* 浮动目录按钮 - 所有设备都显示 */
		#toc-float-btn {
			position: fixed;
			right: 30px;
			bottom:20px; /* 原100px */
			width: 50px;
			height: 50px;
			background: #3b82f6;
			color: white;
			border: none;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			z-index: 10000;
			box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
			transition: all 0.3s ease;
			font-size: 18px;
		}

		#toc-float-btn:hover {
			background: #2563eb;
			transform: scale(1.1);
			box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
		}

		/* 文章目录容器 - 浮动面板 */
		#article-toc-floating {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 90vw;
			max-width: 400px;
			max-height: 70vh;
			background: white;
			border: 1px solid #e1e1e1;
			border-radius: 12px;
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
			z-index: 10001;
			display: none;
			overflow: hidden;
		}

		#article-toc-floating.show {
			display: block;
		}

		/* 目录遮罩 */
		#toc-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.4);
			z-index: 10000;
			display: none;
		}

		#toc-overlay.show {
			display: block;
		}

		/* 目录头部 */
		.toc-floating-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 16px 20px;
			background: linear-gradient(135deg, #3b82f6, #1d4ed8);
			color: white;
			border-radius: 12px 12px 0 0;
		}

		.toc-floating-header h3 {
			margin: 0;
			font-size: 16px;
			font-weight: 600;
		}

		.toc-close-btn {
			background: none;
			border: none;
			color: white;
			font-size: 16px;
			cursor: pointer;
			width: 28px;
			height: 28px;
			border-radius: 6px;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: background 0.3s ease;
		}

		.toc-close-btn:hover {
			background: rgba(255, 255, 255, 0.2);
		}

		/* 目录内容 */
		#toc-floating-list {
			list-style: none;
			padding: 15px;
			margin: 0;
			max-height: calc(70vh - 60px);
			overflow-y: auto;
		}

		#toc-floating-list::-webkit-scrollbar {
			width: 4px;
		}

		#toc-floating-list::-webkit-scrollbar-thumb {
			background: #cbd5e0;
			border-radius: 2px;
		}

		#toc-floating-list li {
			margin: 3px 0;
			line-height: 1.4;
		}

		#toc-floating-list a {
			display: block;
			padding: 8px 12px;
			color: #4a5568;
			text-decoration: none;
			border-radius: 6px;
			font-size: 14px;
			transition: all 0.2s ease;
			border-left: 3px solid transparent;
		}

		#toc-floating-list a:hover {
			background: #f7fafc;
			color: #3b82f6;
			border-left-color: #3b82f6;
		}

		/* 精细的标题级别样式 */
		#toc-floating-list .toc-h1 {
			padding-left: 12px;
			font-weight: 700;
			font-size: 15px;
			color: #1a202c;
			border-left-color: #3b82f6;
		}

		#toc-floating-list .toc-h2 {
			padding-left: 20px;
			font-weight: 600;
			font-size: 14px;
			color: #2d3748;
			border-left-color: #60a5fa;
		}

		#toc-floating-list .toc-h3 {
			padding-left: 28px;
			font-weight: 500;
			font-size: 14px;
			color: #4a5568;
			border-left-color: #93c5fd;
		}

		#toc-floating-list .toc-h4 {
			padding-left: 36px;
			font-size: 13px;
			color: #718096;
			border-left-color: #bfdbfe;
		}

		#toc-floating-list .toc-h5 {
			padding-left: 44px;
			font-size: 13px;
			color: #a0aec0;
			border-left-color: #dbeafe;
		}

		#toc-floating-list .toc-h6 {
			padding-left: 52px;
			font-size: 12px;
			color: #cbd5e0;
			border-left-color: #eff6ff;
		}

		#toc-floating-list .toc-active {
			background: #ebf8ff !important;
			color: #3b82f6 !important;
			font-weight: 600 !important;
			border-left-color: #3b82f6 !important;
		}

		.toc-empty {
			color: #a0aec0;
			font-style: italic;
			text-align: center;
			padding: 40px 20px;
			font-size: 14px;
		}

		/* 固定右侧目录样式 - 使用真正的固定定位 */
		.toc-container {
			position: fixed;
			top: 85px; /* ← 调整这个值：数值越大目录越靠下，数值越小目录越靠上 */
			right: 260px; /* ← 调整这个值：数值越大目录越靠左，数值越小目录越靠右 */
			width: 340px; /* 保持原有侧边栏宽度300px */
			z-index: 100;
			background: white;
			padding: 1rem;
			border-radius: 0.75rem;
			box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
			transition: all 0.5s;
			display: none; /* 默认隐藏，在桌面端显示 */
			max-height: 70vh;
			overflow: hidden;
		}

		.toc-container:hover {
			box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
		}

		.toc-container h2 {
			display: inline-flex;
			align-items: center;
			gap: 0.5rem;
			font-size: 1rem;
			font-weight: 600;
			color: #1f2937;
			margin: 0 0 0.5rem 0;
		}

		.toc-container .toc {
			max-height: calc(70vh - 60px);
			overflow-y: auto;
		}

		.toc-container .toc::-webkit-scrollbar {
			width: 4px;
		}

		.toc-container .toc::-webkit-scrollbar-thumb {
			background: #d1d5db;
			border-radius: 2px;
		}

		/* 修复目录链接样式 */
		.toc-container .toc a {
			display: block;
			padding: 6px 12px;
			color: #4b5563;
			text-decoration: none;
			border-radius: 4px;
			font-size: 14px;
			transition: all 0.2s ease;
			border-left: 3px solid transparent;
			margin: 2px 0;
		}

		.toc-container .toc a:hover {
			background: #f3f4f6;
			color: #3b82f6;
			border-left-color: #3b82f6;
		}

		.toc-container .toc a.active {
			background: #ebf8ff;
			color: #3b82f6;
			border-left-color: #3b82f6;
			font-weight: 600;
		}

		/* 目录层级缩进 */
		.toc-level-1 a { padding-left: 12px; }
		.toc-level-2 a { padding-left: 20px; }
		.toc-level-3 a { padding-left: 28px; }
		.toc-level-4 a { padding-left: 36px; }
		.toc-level-5 a { padding-left: 44px; }
		.toc-level-6 a { padding-left: 52px; }

		/* 响应式布局调整 */
		@media (min-width: 1200px) {
			/* 桌面端显示固定目录 */
			.toc-container {
				display: block;
			}
			
			/* 桌面端也显示浮动按钮，但位置调整 */
			#toc-float-btn {
				display: flex;
				bottom: calc(150px - 8mm); /* 调整位置避免重叠并向下移动5mm */
			}
		}

		@media (max-width: 1199px) {
			/* 移动端隐藏固定目录 */
			.toc-container {
				display: none;
			}
			
			/* 移动端显示浮动按钮 */
			#toc-float-btn {
				display: flex;
				bottom: calc(100px - 8mm); /* 向下移动5mm */
			}
		}

		/* 暗色模式支持 */
		@media (prefers-color-scheme: dark) {
			.toc-container {
				background: #1e293b;
				color: #f1f5f9;
			}

			.toc-container h2 {
				color: #f1f5f9;
			}

			.toc-container .toc a {
				color: #d1d5db;
			}

			.toc-container .toc a:hover {
				background: #374151;
				color: #60a5fa;
			}

			.toc-container .toc a.active {
				background: #1e40af;
				color: #dbeafe;
			}

			#article-toc-floating {
				background: #1e293b;
				color: #f1f5f9;
			}

			#toc-floating-list a {
				color: #d1d5db;
			}

			#toc-floating-list a:hover {
				background: #374151;
				color: #60a5fa;
			}
		}
            /* 现代化分类目录按钮样式 */
.widget_categories .link-tagcloud {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 0 -4px;
}

.widget_categories .link-tag {
    display: inline-block;
    background: linear-gradient(135deg, #f8fafc, #f1f5f9);
    color: #475569;
    padding: 8px 12px;
    border-radius: 8px;
    text-decoration: none;
    font-size: 13px;
    font-weight: 500;
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease;
    flex: 1;
    min-width: calc(33.333% - 16px);
    text-align: center;
    margin: 4px;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
}

.widget_categories .link-tag::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(59, 130, 246, 0.1), 
        transparent);
    transition: left 0.6s ease;
}

.widget_categories .link-tag:hover {
    background: linear-gradient(135deg, #3b82f6, #6366f1);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    border-color: #3b82f6;
}

.widget_categories .link-tag:hover::before {
    left: 100%;
}

/* 响应式调整 */
@media (max-width: 1024px) {
    .widget_categories .link-tag {
        min-width: calc(50% - 16px);
    }
}

@media (max-width: 768px) {
    .widget_categories .link-tag {
        min-width: calc(100% - 16px);
    }
}
			
		</style>
		
		{{ &OPT.codeBeforHead }}
	</head>
	<body class="archive paged category category-zhishi category-5 paged-2 category-paged-2 lang-cn el-boxed">
		<!-- 原有header内容保持不变 -->
		<header class="header">
			<div class="container clearfix">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="icon-bar icon-bar-1"></span>
						<span class="icon-bar icon-bar-2"></span>
						<span class="icon-bar icon-bar-3"></span>
					</button>
					<div class="logo">
						{{ #OPT.logo }}
						<a href="/" rel="home"><img src="{{ &OPT.logo }}" alt="{{ &OPT.siteName }}"></a>
						{{ /OPT.logo }}
						
						{{ ^OPT.logo }}
						<a href="/" rel="home"><img src="https://cdn.jsdelivr.net/gh/chnbsdan/cloudflare-workers-blog@master/themes/JustNews2/files/logo2.png" alt="请自定义OPT.logo"></a>
						{{ /OPT.logo }}
					</div>
				</div>
				<div class="collapse navbar-collapse">
					<nav class="navbar-left primary-menu">
						<ul id="menu-%e5%af%bc%e8%88%aa" class="nav navbar-nav wpcom-adv-menu">
							{{ #widgetMenuList }}
								<li class="menu-item"><a href="{{ &url }}">{{ &title }}</a></li>
							{{ /widgetMenuList }}
						</ul>
					</nav>
					<div class="navbar-action pull-right">
						<div id="j-user-wrap">
							<a class="login cur" href="/admin">登录</a>
						</div>
					</div>
				</div>
			</div>
		</header>
		
		<div id="wrap">
			<div class="container wrap">
				<div class="main">
					<!-- 原有文章内容保持不变 -->
					<article id="post-{{ &articleSingle.id }}" class="post-{{ &articleSingle.id }} post type-post status-publish format-standard has-post-thumbnail hentry ">
						<div class="entry">
							<div class="entry-head">
								<h1 class="entry-title">{{ &articleSingle.title }}</h1>
								<div class="entry-info">
									<time class="entry-date published" datetime="{{ &articleSingle.createDate }}" pubdate="">{{ &articleSingle.createDate10 }}</time>
									<span class="dot">•</span>
									{{ #articleSingle.category }}
										<a href="/category/{{&.}}" rel="category tag">{{&.}}</a>
									{{ /articleSingle.category }}
									<span class="dot">•</span>
									<span id="{{ &articleSingle.url }}" class="leancloud_visitors">
										<em>{{ &OPT.otherCodeA }}</em>
										<i class="leancloud-visitors-count"></i>
									</span>
								</div>
							</div>
							<div class="entry-content">
								{{{ articleSingle.contentHtml }}}
							</div>
							<div class="entry-footer">
								<div class="entry-tag">
									{{ #articleSingle.tags }}
										<a href="/tags/{{&.}}" rel="tag">{{&.}}</a>
									{{ /articleSingle.tags }}
								</div>

								<div class="entry-page">
									{{ #articleNewer }}	
									<div class="entry-page-prev j-lazy lazyloaded" style="background-image: url(&quot;{{ &img }}&quot;); display: block;" data-original="{{ &img }}" data-bg="{{ &img }}" fifu-width="392" fifu-height="86">
										<a href="{{ &url }}" title="{{ &title }}" rel="prev" >
											<span>{{ &title }}</span></a>
										<div class="entry-page-info">
											<span class="pull-left">
												<i class="wpcom-icon wi">
													<svg aria-hidden="true">
														<use xlink:href="#wi-arrow-left-double"></use>
													</svg>
												</i>上一篇</span>
											<span class="pull-right">{{ &createDate10 }}</span></div>
									</div>
									{{ /articleNewer }}

									{{ #articleOlder }}
									<div class="entry-page-next j-lazy lazyloaded" style="background-image: url(&quot;{{ &img }}&quot;); display: block;" data-original="{{ &img }}" data-bg="{{ &img }}" fifu-width="392" fifu-height="86">
										<a href="{{ &url }}" title="{{ &title }}" rel="next" >
											<span>{{ &title }}</span></a>
										<div class="entry-page-info">
											<span class="pull-right">下一篇
												<i class="wpcom-icon wi">
													<svg aria-hidden="true">
														<use xlink:href="#wi-arrow-right-double"></use></svg>
												</i>
											</span>
											<span class="pull-left">{{ &createDate10 }}</span></div>
									</div>
									{{ /articleOlder }}
								</div>
							</div>
							<div id="comments" class="entry-comments">
								{{ &OPT.commentCode }}
							</div>
						</div>
					</article>
				</div>

				<aside class="sidebar">
					<!-- 原有侧边栏小部件保持不变 -->
					<div id="wpcom-post-thumb-2" class="widget widget_post_thumb">
						<h3 class="widget-title">
							<span>近期文章</span></h3>
						<ul>
							{{ #widgetRecentlyList }}
							<li class="item">
								<div class="item-img">
									<a class="item-img-inner" href="{{ &url }}" title="{{ &title }}">
										<img width="480" height="264" src="{{ &img }}" class="attachment-post-thumbnail size-post-thumbnail wp-post-image j-lazy" alt="" title="" data-original="{{ &img }}" /></a>
								</div>
								<div class="item-content">
									<p class="item-title">
										<a href="{{ &url }}" title="{{ &title }}">{{ &title }}</a></p>
									<p class="item-date">{{ &createDate10 }}</p></div>
							</li>
							{{ /widgetRecentlyList }}									
						</ul>
					</div>
					<!-- 修改分类目录为按钮样式 -->
<div id="categories-3" class="widget widget_categories">
    <h3 class="widget-title">
        <span>分类目录</span></h3>
    <div class="link-tagcloud">
        {{ #widgetCategoryList }}
        <a href="/category/{{&.}}" class="link-tag">{{&.}}</a>
        {{ /widgetCategoryList }}
    </div>
</div>
					<div id="tag_cloud-3" class="widget widget_tag_cloud">
						<h3 class="widget-title">
							<span>标签</span></h3>
						<div class="tagcloud">
							{{ #widgetTagsList }}
							<a href="/tags/{{&.}}" class="tag-cloud-link tag-link-6 tag-link-position-1" style="font-size: 8pt;" aria-label="{{&.}}">{{&.}}</a>
							{{ /widgetTagsList }}
						</div>
					</div>

					<div id="linkcat-0" class="widget widget_links">
						<h3 class="widget-title">
							<span>链接</span></h3>
						<div class="link-tagcloud">
							{{ #widgetLinkList }}
								<a href="{{ &url }}" target="_blank" class="link-tag">{{ &title }}</a>
							{{ /widgetLinkList }}
						</div>
					</div>
					{{ &OPT.widgetOther }}
				</aside>
			</div>
		</div>

		<!-- 固定目录容器 - 放在body末尾，独立于其他内容 -->
		<div class="toc-container">
			<h2>
				<i class="fas fa-list"></i>
				目录
			</h2>
			<div class="toc"></div>
		</div>

		<!-- 浮动目录按钮 - 所有设备都显示 -->
		<button id="toc-float-btn" title="打开文章目录">
			<i class="fas fa-list"></i>
		</button>

		<!-- 浮动目录容器 -->
		<div id="toc-overlay"></div>
		<div id="article-toc-floating">
			<div class="toc-floating-header">
				<h3>📑 文章目录</h3>
				<button class="toc-close-btn" title="关闭目录">
					<i class="fas fa-times"></i>
				</button>
			</div>
			<ul id="toc-floating-list">
				<li class="toc-empty">正在生成目录...</li>
			</ul>
		</div>

		<!-- 社交图标栏 -->
		<div class="social-icons-bar">
			<!-- 原有社交图标保持不变 -->
			<a href="mailto:kekelove1688@gmail.com" class="social-icon" title="邮箱">
				<i class="fas fa-envelope"></i>
			</a>
			
			<a href="https://weibo.com/u/7866257468" class="social-icon" target="_blank" title="微博">
				<i class="fab fa-weibo"></i>
			</a>
			
			<a href="https://www.facebook.com/profile.php?id=100091963634555" class="social-icon" target="_blank" title="Facebook">
				<i class="fab fa-facebook-f"></i>
			</a>
			
			<a href="#" class="social-icon back-to-top" onclick="scrollToTop(); return false;" title="返回顶部">
				<i class="fas fa-chevron-up"></i>
			</a>
			
			<a href="https://x.com/home/@chnbsdan" class="social-icon" target="_blank" title="X帐号">
				<i class="fab fa-twitter"></i>
			</a>
			
			<a href="https://space.bilibili.com/1913680621" class="social-icon" target="_blank" title="Bilibili">
				<i class="fab fa-bilibili"></i>
			</a>
			
			<a href="https://t.me/ben_mesa" class="social-icon" target="_blank" title="Telegram">
				<i class="fab fa-telegram-plane"></i>
			</a>
		</div>
		
		<!-- 原有footer内容保持不变 -->
		<footer class="footer">
			<div class="container">
				<div class="clearfix">
					<div class="footer-col footer-col-copy">
						<div class="copyright">
							<p>{{ &OPT.copyRight }}</p>
						</div>
					</div>
					<div class="footer-col footer-col-sns">
						<div class="footer-sns"></div>
					</div>
				</div>
			</div>
		</footer>
		<div class="action action-style-0 action-color-0 action-pos-0" style="bottom:20%;">
			<div class="action-item gotop j-top">
				<i class="wpcom-icon wi action-item-icon">
					<svg aria-hidden="true">
						<use xlink:href="#wi-arrow-up-2"></use>
					</svg>
				</i>
			</div>
		</div>

		<!-- 外部脚本 -->
		<link rel='stylesheet' id='lazyload-spinner-css' href='https://cdn.jsdelivr.net/gh/gdtool/cloudflare-workers-blog@master/themes/JustNews/files/lazyload.css?ver=3.4.9' type='text/css' media='all' />
		<script type='text/javascript' id='main-js-extra'>
		/* <![CDATA[ */
		var _wpcom_js = {"webp":"","ajaxurl":"","theme_url":"https://cdn.jsdelivr.net/gh/gdtool/cloudflare-workers-blog@master/themes/JustNews/","slide_speed":"5000","lightbox":"1","user_card_height":"356","video_height":"482","fixed_sidebar":"1","login_url":"/admin","register_url":"/","errors":{"require":"\u4e0d\u80fd\u4e3a\u7a7a","email":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7535\u5b50\u90ae\u7bb1","pls_enter":"\u8bf7\u8f93\u5165","password":"\u5bc6\u7801\u5fc5\u987b\u4e3a6~32\u4e2a\u5b57\u7b26","passcheck":"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4","phone":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801","terms":"Please read and agree with the terms","sms_code":"\u9a8c\u8bc1\u7801\u9519\u8bef","captcha_verify":"\u8bf7\u70b9\u51fb\u6309\u94ae\u8fdb\u884c\u9a8c\u8bc1","captcha_fail":"\u70b9\u51fb\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5","nonce":"\u968f\u673a\u6570\u6821\u9a8c\u5931\u8d25","req_error":"\u8bf7\u6c42\u5931\u8d25"},"follow_btn":"<i class=\"wpcom-icon wi\"><svg aria-hidden=\"true\"><use xlink:href=\"#wi-add\"><\/use><\/svg><\/i>\u5173\u6ce8","followed_btn":"\u5df2\u5173\u6ce8","user_card":"1"};
		/* ]]> */
		</script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/gdtool/cloudflare-workers-blog@master/themes/JustNews/files/main.js?ver=6.1.2' id='main-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.6/wp-includes/js/comment-reply.min.js?ver=5.6' id='comment-reply-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/idiotWu/jQuery-TOC@0.0.6/dist/jquery.toc.min.js?ver=1.0.1' id='githuber-toc-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/WordPress/WordPress@5.5.3/wp-includes/js/clipboard.min.js?ver=5.6' id='clipboard-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/npm/emojify.js@1.1.0/dist/js/emojify.min.js?ver=1.1.0' id='emojify-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/gdtool/cloudflare-workers-blog@master/themes/JustNews/files/wp-embed.js?ver=6.1.2' id='wp-embed-js'></script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/gdtool/cloudflare-workers-blog@master/themes/JustNews/files/lazySizesConfig.js?ver=3.4.9' id='lazysizes-config-js'></script>
		<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/plugins/unveilhooks/ls.unveilhooks.min.js?ver=5.6' id='unveilhooks-js'></script>
		<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/plugins/bgset/ls.bgset.min.js?ver=5.6' id='bgset-js'></script>
		<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js?ver=5.6' id='lazysizes-js'></script>
		<script type='text/javascript' id='fifu-image-js-js-extra'>
		/* <![CDATA[ */
		var fifuImageVars = {"fifu_lazy":"1","fifu_woo_lbox_enabled":"1","fifu_woo_zoom":"inline","fifu_is_product":"","fifu_is_flatsome_active":"","fifu_rest_url":"","fifu_nonce":"96a15ffec7"};
		/* ]]> */
		</script>
		<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/gdtool/cloudflare-workers-blog@master/themes/JustNews/files/image.js?ver=3.4.9' id='fifu-image-js-js'></script>

		<!-- 完整的目录功能脚本 -->
		<script>
		document.addEventListener('DOMContentLoaded', function() {
			// 浮动目录功能
			const tocFloatBtn = document.getElementById('toc-float-btn');
			const tocFloating = document.getElementById('article-toc-floating');
			const tocOverlay = document.getElementById('toc-overlay');
			const tocCloseBtn = document.querySelector('.toc-close-btn');
			let isTocGenerated = false;

			// 初始化浮动目录
			function initFloatingToc() {
				// 点击浮动按钮打开目录
				tocFloatBtn.addEventListener('click', openToc);

				// 点击遮罩关闭目录
				tocOverlay.addEventListener('click', closeToc);

				// 点击关闭按钮关闭目录
				tocCloseBtn.addEventListener('click', closeToc);

				// ESC键关闭目录
				document.addEventListener('keydown', function(e) {
					if (e.key === 'Escape' && tocFloating.classList.contains('show')) {
						closeToc();
					}
				});
			}

			// 打开目录
			function openToc() {
				tocFloating.classList.add('show');
				tocOverlay.classList.add('show');
				document.body.style.overflow = 'hidden';

				// 如果目录内容未生成，则生成
				if (!isTocGenerated) {
					generateFloatingTOC();
					isTocGenerated = true;
				}
			}

			// 关闭目录
			function closeToc() {
				tocFloating.classList.remove('show');
				tocOverlay.classList.remove('show');
				document.body.style.overflow = '';
			}

			// 生成浮动目录内容
			function generateFloatingTOC() {
				const articleContent = document.querySelector('.entry-content');
				const tocList = document.getElementById('toc-floating-list');

				if (!articleContent || !tocList) return;

				// 清空现有内容
				tocList.innerHTML = '';

				// 获取所有标题元素 (h1-h6)
				const headings = articleContent.querySelectorAll('h1, h2, h3, h4, h5, h6');

				if (headings.length === 0) {
					tocList.innerHTML = '<li class="toc-empty">本文暂无目录结构</li>';
					return;
				}

				let tocHTML = '';

				headings.forEach((heading, index) => {
					// 为标题添加ID（如果还没有）
					let headingId = heading.id;
					if (!headingId) {
						headingId = 'heading-' + index;
						heading.id = headingId;
					}

					// 确定标题级别
					const level = parseInt(heading.tagName.substring(1));
					const levelClass = 'toc-h' + level;

					tocHTML += `
						<li class="${levelClass}">
							<a href="#${headingId}" data-level="${level}">
								${heading.textContent}
							</a>
						</li>
					`;
				});

				tocList.innerHTML = tocHTML;

				// 初始化滚动监听和点击事件
				initFloatingTocEvents();
			}

			// 初始化浮动目录事件
			function initFloatingTocEvents() {
				const tocLinks = document.querySelectorAll('#toc-floating-list a');
				const headings = document.querySelectorAll('.entry-content h1, .entry-content h2, .entry-content h3, .entry-content h4, .entry-content h5, .entry-content h6');

				if (tocLinks.length === 0) return;

				// 移除所有激活状态
				function removeActiveClasses() {
					tocLinks.forEach(link => {
						link.classList.remove('toc-active');
					});
				}

				// 滚动监听
				window.addEventListener('scroll', function() {
					let current = '';

					headings.forEach(heading => {
						const headingTop = heading.getBoundingClientRect().top;
						if (headingTop <= 100) {
							current = heading.id;
						}
					});

					removeActiveClasses();

					if (current) {
						const activeLink = document.querySelector(`#toc-floating-list a[href="#${current}"]`);
						if (activeLink) {
							activeLink.classList.add('toc-active');
						}
					}
				});

				// 平滑滚动和关闭目录
				tocLinks.forEach(link => {
					link.addEventListener('click', function(e) {
						e.preventDefault();
						const targetId = this.getAttribute('href').substring(1);
						const targetElement = document.getElementById(targetId);

						if (targetElement) {
							const offsetTop = targetElement.getBoundingClientRect().top + window.pageYOffset - 80;
							window.scrollTo({
								top: offsetTop,
								behavior: 'smooth'
							});

							// 滚动后关闭目录
							setTimeout(closeToc, 300);
						}
					});
				});
			}

			// 初始化浮动目录
			setTimeout(initFloatingToc, 100);

			// 固定右侧目录功能
			function initFixedToc() {
				const fixedTocContainer = document.querySelector('.toc-container .toc');
				if (!fixedTocContainer) return;

				const articleContent = document.querySelector('.entry-content');
				if (!articleContent) return;

				// 获取所有标题元素
				const headings = articleContent.querySelectorAll('h1, h2, h3, h4, h5, h6');
				if (headings.length === 0) {
					fixedTocContainer.innerHTML = '<div style="color: #6b7280; text-align: center; padding: 20px; font-style: italic;">本文暂无目录结构</div>';
					return;
				}

				let fixedTocHTML = '';

				headings.forEach((heading, index) => {
					// 为标题添加ID（如果还没有）
					let headingId = heading.id;
					if (!headingId) {
						headingId = 'heading-' + index;
						heading.id = headingId;
					}

					// 确定标题级别
					const level = parseInt(heading.tagName.substring(1));

					fixedTocHTML += `
						<div class="toc-level-${level}">
							<a href="#${headingId}" class="toc-link">
								${heading.textContent}
							</a>
						</div>
					`;
				});

				fixedTocContainer.innerHTML = fixedTocHTML;

				// 为固定目录添加滚动高亮
				const fixedTocLinks = fixedTocContainer.querySelectorAll('a');
				
				window.addEventListener('scroll', function() {
					let current = '';
					
					headings.forEach(heading => {
						const headingTop = heading.getBoundingClientRect().top;
						if (headingTop <= 100) {
							current = heading.id;
						}
					});

					fixedTocLinks.forEach(link => {
						link.classList.remove('active');
					});

					if (current) {
						const activeLink = fixedTocContainer.querySelector(`a[href="#${current}"]`);
						if (activeLink) {
							activeLink.classList.add('active');
							// 滚动到可见区域
							const container = fixedTocContainer;
							const activeOffset = activeLink.offsetTop;
							const containerHeight = container.clientHeight;
							const scrollTop = container.scrollTop;
							
							if (activeOffset < scrollTop || activeOffset > scrollTop + containerHeight - 50) {
								container.scrollTo({
									top: activeOffset - 50,
									behavior: 'smooth'
								});
							}
						}
					}
				});

				// 点击目录链接平滑滚动
				fixedTocLinks.forEach(link => {
					link.addEventListener('click', function(e) {
						e.preventDefault();
						const targetId = this.getAttribute('href').substring(1);
						const targetElement = document.getElementById(targetId);

						if (targetElement) {
							const offsetTop = targetElement.getBoundingClientRect().top + window.pageYOffset - 80;
							window.scrollTo({
								top: offsetTop,
								behavior: 'smooth'
							});
						}
					});
				});
			}

			// 初始化固定目录
			setTimeout(initFixedToc, 100);
		});
		</script>

		{{ &OPT.codeBeforBody }}
	</body>
</html>
